const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DaMOHVFd.js","assets/index-DFDEow0Q.css"])))=>i.map(i=>d[i]);
import{d as V,c as g,o as d,a as h,w as U,b as p,n as t,e as y,t as B,f as L,r as S,_ as C,g as k,h as J,i as Q,j as z,m as X,V as W,k as N,T as Y,l as D,v as T,p as w,q as R,F as A,s as j,u as Z,x as O,y as I,z as F,A as x,B as ee,C as se}from"./index-DaMOHVFd.js";async function ae(_){return new Promise(o=>setTimeout(o,_))}const E="/zhilfond-test/images/default-image.png";function M(_){return!_&&typeof _!="object"?{}:Object.entries(_).reduce((o,[l,e])=>{let u=`_${l}`;return u+=typeof e!="boolean"?`-${e}`:"",{...o,[u]:!!e}},{})}const te=p("img",{src:E},null,-1),le=[te],ne=V({__name:"UserCard",props:{tag:{default:"div"},user:{},active:{type:Boolean,default:!1}},setup(_){const o=_,l=g(()=>M({active:o.active}));return(e,u)=>(d(),h(S(e.tag),{class:t([e.$style.UserCard,l.value])},{default:U(()=>{var s,v;return[p("div",{class:t(e.$style.imageWrapper)},le,2),p("div",{class:t(e.$style.content)},[(s=e.user)!=null&&s.username?(d(),y("div",{key:0,class:t(e.$style.username)},B(e.user.username),3)):L("",!0),(v=e.user)!=null&&v.email?(d(),y("div",{key:1,class:t(e.$style.email)},B(e.user.email),3)):L("",!0)],2)]}),_:1},8,["class"]))}}),re="_UserCard_19667_133",oe="_content_19667_148",ue="_username_19667_151",ie="_imageWrapper_19667_161",ce="_email_19667_186",de={"fade-enter-active":"_fade-enter-active_19667_123","fade-leave-active":"_fade-leave-active_19667_124","fade-enter-from":"_fade-enter-from_19667_128","fade-leave-to":"_fade-leave-to_19667_129",UserCard:re,content:oe,username:ue,imageWrapper:ie,email:ce},_e={$style:de},fe=C(ne,[["__cssModules",_e]]),ve=V({__name:"VScroll",props:{tag:{default:"div"},curtain:{type:Boolean,default:!1}},setup(_){const o=_,l=k(null),e=k(null),u=k(NaN),s=k(!1);J(a),Q($);const v=g(()=>M({scrollable:s.value,curtain:o.curtain,start:s.value&&u.value<=3,end:s.value&&u.value>=97}));function n(){if(!o.curtain||!l.value)return;const{scrollHeight:m,clientHeight:i,scrollTop:r}=l.value;s.value=m!==i;const c=m-i;let f=Math.round(r/c*100);f=f>100?100:f,u.value=f}function a(){l.value&&(e.value=new ResizeObserver(n),e.value.observe(l.value))}function $(){e.value&&(e.value.disconnect(),e.value=null)}return(m,i)=>(d(),h(S(m.tag),{class:t([m.$style.VScroll,v.value])},{default:U(()=>[p("div",{ref_key:"target",ref:l,class:t(m.$style.content),onScroll:n},[z(m.$slots,"default")],34)]),_:3},8,["class"]))}}),pe="_VScroll_f911o_133",me="_content_f911o_157",ge={"fade-enter-active":"_fade-enter-active_f911o_123","fade-leave-active":"_fade-leave-active_f911o_124","fade-enter-from":"_fade-enter-from_f911o_128","fade-leave-to":"_fade-leave-to_f911o_129",VScroll:pe,content:me},$e={$style:ge},H=C(ve,[["__cssModules",$e]]),ye="_VLoader_19gy8_141",be="_rotate_19gy8_1",he={"fade-enter-active":"_fade-enter-active_19gy8_123","fade-leave-active":"_fade-leave-active_19gy8_124","fade-enter-from":"_fade-enter-from_19gy8_128","fade-leave-to":"_fade-leave-to_19gy8_129",VLoader:ye,rotate:be},Ue={__name:"VLoader",setup(_){return(o,l)=>(d(),h(W,X({class:[o.$style.VLoader,"v-loader"],icon:"loader"},o.$attrs),null,16,["class"]))}},ke={$style:he},we=C(Ue,[["__cssModules",ke]]),Le=V({__name:"UsersList",props:{user:{},users:{default:()=>[]},search:{default:""},loading:{type:Boolean,default:!1}},emits:["update:user"],setup(_,{emit:o}){const l=_,e=o,u=k(!1);N(()=>l.loading,n=>{u.value=!n&&!!l.search});const s=g(()=>u.value?"ничего не найдено":"начните поиск");function v(n){e("update:user",n)}return(n,a)=>(d(),h(Y,{class:t(n.$style.UsersList),tag:"div",name:"fade",mode:"out-in"},{default:U(()=>[D(w(H,{key:"list",curtain:""},{default:U(()=>[p("ul",{class:t(n.$style.list)},[(d(!0),y(A,null,R(n.users,$=>(d(),h(fe,{key:`UserCard_${$.id}`,class:t(n.$style.userCard),user:$,active:!!n.user&&$.id===n.user.id,tag:"li",onClick:m=>v($)},null,8,["class","user","active","onClick"]))),128))],2)]),_:1},512),[[T,!n.loading&&n.users.length]]),D(p("div",{key:"loader",class:t(n.$style.loader)},[w(we,{size:"40"})],2),[[T,n.loading]]),D(p("div",{key:"nodata",class:t(n.$style.nodata)},[w(j,{name:"fade",mode:"out-in"},{default:U(()=>[(d(),y("span",{key:s.value},B(s.value),1))]),_:1})],2),[[T,!n.loading&&!n.users.length]])]),_:1},8,["class"]))}}),Ce="_UsersList_1tprr_133",Ve="_list_1tprr_146",Be="_loader_1tprr_154",Pe="_userCard_1tprr_168",ze={"fade-enter-active":"_fade-enter-active_1tprr_123","fade-leave-active":"_fade-leave-active_1tprr_124","fade-enter-from":"_fade-enter-from_1tprr_128","fade-leave-to":"_fade-leave-to_1tprr_129",UsersList:Ce,list:Ve,loader:Be,userCard:Pe},Me={$style:ze},Se=C(Le,[["__cssModules",Me]]);function G({properties:_={},devices:o=["desktop","tablet","mobile"],breakpoints:l=O,separator:e=" "}){const u=Z("deviceIs"),s=g(()=>Object.keys(l).sort((i,r)=>{var c,f;return(((c=O)==null?void 0:c[i])||0)-(((f=O)==null?void 0:f[r])||0)})),v=g(()=>!_||typeof _!="object"?{}:Object.entries(_).reduce((i,[r,c])=>{const f=m(c);return f!=null&&f.length?{...i,[r]:a(f)}:i},{})),n=g(()=>Object.entries(v.value).reduce((i,[r,c])=>({...i,[r]:$(c)}),{}));function a(i=[]){const r=m(o);return r!=null&&r.some(c=>typeof c!="string")?{}:r.reduce((c,f,P)=>{const b=i==null?void 0:i[P];return b&&b!=="_"?{...c,[f]:b}:c},{})}function $(i={}){var f,P;const r=Object.keys(i);if(r.length===1||!((f=u==null?void 0:u.device)!=null&&f.value))return(i==null?void 0:i[r[0]])||null;const c=s.value.indexOf((P=u==null?void 0:u.device)==null?void 0:P.value);if(c===-1)return null;for(let b=c;b<s.value.length;b++){const K=s.value[b],q=i==null?void 0:i[K];if(q)return q}return null}function m(i){return Array.isArray(i)?i.filter(Boolean):((i==null?void 0:i.split(e))||[]).filter(Boolean)}return n}const De=["value","placeholder","disabled"],Te=V({__name:"VInput",props:{value:{default:null},modelValue:{default:null},size:{default:"48"},breakpoints:{default:"desktop tablet mobile"},icon:{default:""},iconSize:{default:null},preicon:{default:""},disabled:{type:Boolean,default:!1},placeholder:{default:""}},emits:["change","update:modelValue"],setup(_,{emit:o}){const l=_,e=o,u=g(()=>G({devices:l.breakpoints,properties:{size:l.size}})),s=g(()=>M({...u.value.value,disabled:l.disabled})),v=g(()=>(l.value??l.modelValue)||"");function n(a){const m=a.target.value;e("change",m),e("update:modelValue",m)}return(a,$)=>(d(),y("label",{class:t([a.$style.VInput,"v-input",s.value])},[z(a.$slots,"preicon",{},()=>[a.preicon?(d(),h(W,{key:0,size:a.iconSize,icon:a.preicon,class:t([a.$style.icon,a.$style._left,"v-input__icon"])},null,8,["size","icon","class"])):L("",!0)]),p("input",{class:t(a.$style.target),value:v.value,placeholder:a.placeholder,disabled:a.disabled,spellcheck:"false",onInput:n},null,42,De),z(a.$slots,"icon",{},()=>[a.icon?(d(),h(W,{key:0,class:t([a.$style.icon,a.$style._right,"v-input__icon"]),icon:a.icon,size:a.iconSize},null,8,["class","icon","size"])):L("",!0)])],2))}}),Oe="_VInput_1wl1t_133",We="_target_1wl1t_148",je={"fade-enter-active":"_fade-enter-active_1wl1t_123","fade-leave-active":"_fade-leave-active_1wl1t_124","fade-enter-from":"_fade-enter-from_1wl1t_128","fade-leave-to":"_fade-leave-to_1wl1t_129",VInput:Oe,target:We},qe={$style:je},Ie=C(Te,[["__cssModules",qe]]),Ne=V({__name:"VButton",props:{tag:{default:"button"},size:{default:"32"},color:{default:"primary"},radius:{default:"6"},breakpoints:{default:"desktop tablet mobile"},icon:{default:""},preicon:{default:""},square:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},setup(_){const o=F(()=>x(()=>import("./index-DaMOHVFd.js").then(s=>s.D),__vite__mapDeps([0,1]))),l=_,e=g(()=>G({devices:l.breakpoints,properties:{size:l.size,color:l.color,radius:l.radius}})),u=g(()=>M({...e.value.value,square:l.square}));return(s,v)=>(d(),h(S(s.tag),{class:t([s.$style.VButton,"v-button",u.value]),disabled:s.disabled},{default:U(()=>{var n;return[z(s.$slots,"preicon",{},()=>[s.preicon?(d(),h(I(o),{key:0,class:t([s.$style.icon,"v-button__icon","v-button__icon_pre"]),icon:s.preicon},null,8,["class","icon"])):L("",!0)]),(n=s.$slots)!=null&&n.default?(d(),y("span",{key:0,class:t([s.$style.label,"v-button__label"])},[z(s.$slots,"default")],2)):L("",!0),z(s.$slots,"icon",{},()=>[s.icon?(d(),h(I(o),{key:0,class:t([s.$style.icon,"v-button__icon","v-button__icon_post"]),icon:s.icon},null,8,["class","icon"])):L("",!0)])]}),_:3},8,["class","disabled"]))}}),Re="_VButton_1wg9s_133",Ae="_label_1wg9s_194",Ee="_icon_1wg9s_197",He={"fade-enter-active":"_fade-enter-active_1wg9s_123","fade-leave-active":"_fade-leave-active_1wg9s_124","fade-enter-from":"_fade-enter-from_1wg9s_128","fade-leave-to":"_fade-leave-to_1wg9s_129",VButton:Re,label:Ae,icon:Ee},Ge={$style:He},Ke=C(Ne,[["__cssModules",Ge]]),Je=V({__name:"UsersPane",props:{search:{default:""},user:{default:null},users:{default:()=>[]},loading:{type:Boolean,default:!1}},emits:["update:search","update:user"],setup(_,{emit:o}){const l=o,e=k(!1),u=g(()=>M({opened:e.value})),s=g(()=>e.value?"Закрыть":"Поиск сотрудников");function v(a){l("update:search",a)}function n(a){l("update:user",a),e.value=!1}return(a,$)=>(d(),y("aside",{class:t([a.$style.UsersPane,u.value])},[p("div",{class:t(a.$style.back)},null,2),p("div",{class:t(a.$style.wrapper)},[p("div",{class:t(a.$style.title)},"Поиск сотрудников",2),w(Ie,{value:a.search,class:t(a.$style.search),placeholder:"Введите id или имя",onChange:v},null,8,["value","class"]),p("div",{class:t([a.$style.results,a.$style.title])},"Результаты",2),w(Se,{user:a.user,users:a.users,loading:a.loading,search:a.search,"onUpdate:user":n},null,8,["user","users","loading","search"])],2),p("div",{class:t(a.$style.buttonWrapper)},[w(Ke,{class:t(a.$style.button),size:"56 48",breakpoints:"desktop mobile",onClick:$[0]||($[0]=m=>e.value=!e.value)},{default:U(()=>[w(j,{name:"fade",mode:"out-in"},{default:U(()=>[(d(),y("span",{class:t(a.$style.label),key:s.value},B(s.value),3))]),_:1})]),_:1},8,["class"])],2)],2))}}),Qe="_UsersPane_1cudg_133",Xe="_wrapper_1cudg_148",Ye="_back_1cudg_154",Ze="_title_1cudg_202",Fe="_search_1cudg_210",xe="_results_1cudg_219",es="_buttonWrapper_1cudg_223",ss="_button_1cudg_223",as={"fade-enter-active":"_fade-enter-active_1cudg_123","fade-leave-active":"_fade-leave-active_1cudg_124","fade-enter-from":"_fade-enter-from_1cudg_128","fade-leave-to":"_fade-leave-to_1cudg_129",UsersPane:Qe,wrapper:Xe,back:Ye,title:Ze,search:Fe,results:xe,buttonWrapper:es,button:ss},ts={$style:as},ls=C(Je,[["__cssModules",ts]]),ns=p("img",{src:E},null,-1),rs=[ns],os=V({__name:"UserDetail",props:{tag:{default:"div"},user:{}},setup(_){const o=_,l=g(()=>{var u,s;const e={};return(u=o.user)!=null&&u.email&&(e.email=o.user.email),(s=o.user)!=null&&s.phone&&(e.phone=o.user.phone),e});return(e,u)=>(d(),h(S(e.tag),{class:t(e.$style.UserDetail)},{default:U(()=>[p("div",{class:t(e.$style.imageWrapper)},rs,2),w(H,{curtain:""},{default:U(()=>{var s;return[p("div",{class:t(e.$style.info)},[(s=e.user)!=null&&s.name?(d(),y("div",{key:0,class:t(e.$style.name)},B(e.user.name),3)):L("",!0),Object.keys(l.value).length?(d(),y("ul",{key:1,class:t(e.$style.detailsList)},[(d(!0),y(A,null,R(l.value,(v,n)=>(d(),y("li",{key:`UserDetail_${n}`,class:t(e.$style.detail)},[p("span",{class:t(e.$style.label)},B(n)+": ",3),ee(" "+B(v),1)],2))),128))],2)):L("",!0),p("div",{class:t(e.$style.about)},"О себе",2),p("div",{class:t(e.$style.aboutText)}," Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. ",2)],2)]}),_:1})]),_:1},8,["class"]))}}),us="_UserDetail_mgoio_133",is="_imageWrapper_mgoio_152",cs="_info_mgoio_170",ds="_name_mgoio_186",_s="_about_mgoio_187",fs="_detailsList_mgoio_203",vs="_detail_mgoio_203",ps="_label_mgoio_218",ms="_aboutText_mgoio_224",gs={"fade-enter-active":"_fade-enter-active_mgoio_123","fade-leave-active":"_fade-leave-active_mgoio_124","fade-enter-from":"_fade-enter-from_mgoio_128","fade-leave-to":"_fade-leave-to_mgoio_129",UserDetail:us,imageWrapper:is,info:cs,name:ds,about:_s,detailsList:fs,detail:vs,label:ps,aboutText:ms},$s={$style:gs},ys=C(os,[["__cssModules",$s]]),bs=V({__name:"users",setup(_){const o=se(),l=k(""),e=k(null),u=k(NaN),s=k(!1);N(()=>l.value,a);const v=g(()=>o.state.currentUser),n=g(()=>o.state.users);function a(r,c){e.value===null&&(e.value=c),clearTimeout(u.value),u.value=setTimeout(()=>{e.value!==l.value&&m(),e.value=null},500)}function $(r){o.dispatch("setCurrentUser",r)}async function m(){const r=Date.now();try{s.value=!!l.value;const c=i();await o.dispatch("fetchUsers",c);const f=Date.now()-r;f<600&&s.value&&await ae(600-f)}catch(c){console.warn("[UsersPage/fetchUsers] request error:",c)}finally{s.value=!1}}function i(){let r=l.value.split(",");r=r.map(b=>b.trim()),r=r.filter(Boolean);const c=/^[0-9]+$/,f=r.filter(b=>/^[0-9]+$/.test(b)),P=r.filter(b=>!c.test(b));return{id:f,username:P}}return(r,c)=>(d(),y("div",{class:t([r.$style.UsersPage,"container"])},[p("section",{class:t(r.$style.wrapper)},[w(ls,{search:l.value,"onUpdate:search":c[0]||(c[0]=f=>l.value=f),class:t(r.$style.usersPane),user:v.value,users:n.value,loading:s.value,"onUpdate:user":$},null,8,["search","class","user","users","loading"]),w(j,{name:"fade",mode:"out-in"},{default:U(()=>[v.value?(d(),h(ys,{key:v.value.id,user:v.value,tag:"article"},null,8,["user"])):(d(),y("div",{key:1,class:t(r.$style.nodata)}," Выберите сотрудника, чтобы посмотреть его профиль ",2))]),_:1})],2)],2))}}),hs="_UsersPage_1rf52_133",Us="_wrapper_1rf52_147",ks="_usersPane_1rf52_154",ws="_nodata_1rf52_159",Ls={"fade-enter-active":"_fade-enter-active_1rf52_123","fade-leave-active":"_fade-leave-active_1rf52_124","fade-enter-from":"_fade-enter-from_1rf52_128","fade-leave-to":"_fade-leave-to_1rf52_129",UsersPage:hs,wrapper:Us,usersPane:ks,nodata:ws},Cs={$style:Ls},Bs=C(bs,[["__cssModules",Cs]]);export{Bs as default};
